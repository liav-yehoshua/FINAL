# בודק מבחנים אוטומטי וצפייה בטקסט מתמונה

## ⚠️ **חשוב! קבצים רגישים חסרים**

**הקבצים הרגישים חסרים ב-Git מסיבות אבטחה.**

### איך להשיג את הקבצים:
1. **הורד את קובץ ה-ZIP** שניתן לך בנפרד
2. **חלץ את הקובץ** באמצעות הסיסמה: `final`
3. **העתק את הקבצים הבאים** לתיקיית הפרויקט:
   - `google-credentials.json` - הרשאות Google Cloud
   - `.env` - קובץ הגדרות עם מפתחות API
4. **ודא שהקבצים נמצאים** באותה תיקייה כמו `exam_grader.py`

**ללא קבצים אלה המערכת לא תעבוד!**

---

## תוכן עניינים
- [מבוא](#מבוא)
- [תכונות עיקריות](#תכונות-עיקריות)
- [מבנה הפרויקט](#מבנה-הפרויקט)
- [דרישות מערכת](#דרישות-מערכת)
- [התקנה והגדרות](#התקנה-והגדרות)
  - [הכנת קבצי הרשאות](#1-הכנת-קבצי-הרשאות)
  - [התקנת חבילות](#2-התקנת-חבילות)
  - [חבילות נדרשות](#3-חבילות-נדרשות)
- [איך להשיג מפתחות API משלך (אופציונלי)](#איך-להשיג-מפתחות-api-משלך-אופציונלי)
- [הגנה על קבצים רגישים](#הגנה-על-קבצים-רגישים)
- [הפעלת המערכות](#הפעלת-המערכות)
  - [בודק מבחנים (exam_grader.py)](#בודק-מבחנים-exam_graderpy)
  - [צפייה בטקסט מתמונה (image_text_viewer.py)](#צפייה-בטקסט-מתמונה-image_text_viewerpy)
- [קריטריוני הבדיקה](#קריטריוני-הבדיקה)
- [תכונות מתקדמות](#תכונות-מתקדמות)
- [פתרון תקלות נפוצות](#פתרון-תקלות-נפוצות)
- [הערות ושאלות נפוצות](#הערות-ושאלות-נפוצות)
- [קרדיטים](#קרדיטים)
- [מחברים](#מחברים)
- [גרסאות](#גרסאות)

---

## מבוא
מערכת זו נועדה להקל על תהליך בדיקת מבחנים ותשובות סטודנטים באמצעות בינה מלאכותית וזיהוי טקסט מתמונות (OCR). המערכת כוללת שני כלים עיקריים:
1. **בודק מבחנים אוטומטי** – מאפשר בדיקה אוטומטית של תשובות סטודנטים מתוך תמונה והשוואתן לתשובה לדוגמה שנוצרת על ידי Gemini.
2. **צפייה בטקסט מתמונה** – מאפשרת להציג טקסט שחולץ מתמונה באמצעות Google Vision API עם דיוק OCR.

---

## תכונות עיקריות
- **בדיקת מבחנים אוטומטית**: העלאת תמונת שאלה, קבלת תשובת מודל (Gemini), העלאת תשובות סטודנטים, קבלת ציונים אוטומטיים לפי קריטריונים מוגדרים מראש.
- **חילוץ טקסט מתמונה (OCR)**: שימוש ב-Google Vision API לזיהוי טקסט מדויק מתמונות עם דיוק OCR.
- **ממשק משתמש גרפי (GUI)**: עבודה נוחה עם חלונות, טפסים, טבלאות ותצוגת תמונות.
- **טבלת ציונים מפורטת**: לכל סטודנט מוצגים ציונים לפי קריטריונים, ציון סופי וניקוד במבחן עם עיצוב משופר.
- **התקנה אוטומטית של חבילות חסרות**: המערכת מתקינה אוטומטית חבילות חסרות בהרצה ראשונה.
- **תיקון שגיאות OCR**: מערכת מתקדמת לתיקון שגיאות נפוצות בזיהוי טקסט.
- **עיבוד תמונה מתקדם**: המרה לגווני אפור, הגדלת ניגודיות, חדות, ושמירה ב-PNG לשיפור תוצאות OCR.
- **דיוק OCR**: הצגת אחוז דיוק OCR עם קידוד צבעים (ירוק/כתום/אדום) לפי רמת הדיוק.
- **אבטחה משופרת**: שימוש בקובץ .env לאחסון מידע רגיש (מפתחות API).

---

## מבנה הפרויקט
```
ProjectFinalv1.1/
│
├── exam_grader.py              # בודק מבחנים אוטומטי
├── image_text_viewer.py        # צפייה בטקסט מתמונה
├── requirements.txt            # קובץ דרישות חבילות
├── .env                        # קובץ הגדרות סביבה (לא מועלה ל-Git)
├── .env.example               # דוגמה לקובץ הגדרות סביבה
├── google-credentials.json     # קובץ הרשאות ל-Google Vision API
├── .gitignore                  # הגדרות Git
└── README.md                   # מדריך זה
```

---

## דרישות מערכת
- **Python**: גרסה 3.6 ומעלה
- **חיבור לאינטרנט**: נדרש עבור Google Vision API ו-Gemini API
- **Google Cloud**: חשבון עם הרשאות ל-Vision API
- **Gemini API**: מפתח API לגישה ל-Gemini

---

## התקנה והגדרות

### 1. **הכנת קבצי הרשאות:**
   - **הורד את קובץ ה-ZIP** שניתן לך בנפרד
   - **חלץ את הקובץ** באמצעות הסיסמה: `final`
   - **העתק את הקבצים הבאים** לתיקיית הפרויקט:
     - `google-credentials.json` - הרשאות Google Cloud
     - `.env` - קובץ הגדרות עם מפתחות API (כבר מוכן לשימוש)
   - **ודא שהקבצים נמצאים** באותה תיקייה כמו `exam_grader.py`

### 2. **התקנת חבילות:**
   ```bash
   pip install -r requirements.txt
   ```
   
   **הערה**: המערכת תנסה להתקין חבילות חסרות אוטומטית בהרצה ראשונה.

### 3. **חבילות נדרשות:**
   - `google-cloud-vision` - עבור OCR
   - `Pillow` - עבור עיבוד תמונות
   - `requests` - עבור API calls
   - `python-dotenv` - עבור טעינת משתני סביבה
   - `tkinter` - עבור GUI (כבר כלול ב-Python)

---

## איך להשיג מפתחות API משלך (אופציונלי)

אם אתה רוצה להשתמש במפתחות API משלך במקום אלה שסופקו:

### **מפתח Gemini API:**
1. היכנס ל-[Google AI Studio](https://makersuite.google.com/app/apikey)
2. לחץ על "Create API Key"
3. העתק את המפתח שנוצר
4. פתח את קובץ `.env` וערוך את השורה:
   ```env
   GEMINI_API_KEY=your_new_api_key_here
   ```

### **הרשאות Google Cloud Vision:**
1. היכנס ל-[Google Cloud Console](https://console.cloud.google.com/)
2. צור פרויקט חדש או השתמש בפרויקט קיים
3. הפעל את Google Vision API
4. צור Service Account:
   - לך ל-IAM & Admin > Service Accounts
   - לחץ על "Create Service Account"
   - תן לו הרשאות ל-Vision API
   - צור מפתח JSON והורד אותו
5. שנה את שם הקובץ ל-`google-credentials.json`
6. העתק אותו לתיקיית הפרויקט

### **עדכון קובץ .env:**
אם שינית את שם קובץ ההרשאות:
```env
GOOGLE_CREDENTIALS_FILE=your_custom_credentials_file.json
```

---

## הגנה על קבצים רגישים

**חשוב!** הקבצים הבאים מכילים מידע רגיש ואסור להעלות אותם ל-GitHub או לשתף אותם עם אחרים:

### קבצים מוגנים:
- `google-credentials.json` - הרשאות Google Cloud
- `.env` - מפתחות API והגדרות רגישות

### מה עושים?
- הקבצים כבר מופיעים ב-`.gitignore` ואינם יועלו ל-Git
- ודא שהקבצים לא נמצאים ב-stage (`git status`)
- כל משתמש צריך ליצור לעצמו קבצים אלה

### איך כל משתמש יוצר קבצים?
1. **קובץ .env:**
   - העתק `.env.example` ל-`.env`
   - ערוך עם הנתונים האמיתיים שלך

2. **קובץ google-credentials.json:**
   - הורד את קובץ ה-ZIP שניתן לך בנפרד
   - חלץ עם הסיסמה `final`
   - העתק את `google-credentials.json` לתיקיית הפרויקט

**לעולם אל תשתפו את הקבצים האלה או תעלו אותם ל-GitHub!**

---

## הפעלת המערכות

### בודק מבחנים (exam_grader.py)
1. ודא שקובץ `.env` מוגדר עם המפתחות הנכונים
2. הפעל את הסקריפט:
   ```bash
   python exam_grader.py
   ```

3. במסך הראשי:
   - הזן שאלה ידנית או העלה תמונה של שאלה
   - הוסף סטודנטים והעלה עבור כל אחד תמונה של תשובתו
   - לחץ על כפתור הבדיקה

4. תוצג טבלת ציונים מפורטת לכל סטודנט, כולל:
   - פירוט הקריטריונים (Correctness, Syntax, Code Structure, Efficiency, Edge Cases)
   - ציון סופי משוקלל
   - ניקוד במבחן
   - עיצוב משופר עם תאים בגודל מותאם

### צפייה בטקסט מתמונה (image_text_viewer.py)
1. ודא שקובץ `.env` מוגדר עם המפתחות הנכונים
2. הפעל את הסקריפט:
   ```bash
   python image_text_viewer.py
   ```

3. בחר תמונה מהמחשב
4. תוצג התמונה לצד הטקסט שחולץ ממנה באמצעות Google Vision API
5. **חדש**: תוצג גם אחוז דיוק OCR עם קידוד צבעים:
   - 🟢 **ירוק (90%+)**: דיוק גבוה
   - 🟠 **כתום (70-89%)**: דיוק בינוני
   - 🔴 **אדום (<70%)**: דיוק נמוך

---

## קריטריוני הבדיקה
המערכת בודקת תשובות לפי הקריטריונים הבאים:
- **Correctness (40%)**: דיוק התשובה
- **Syntax (15%)**: תקינות תחביר הקוד
- **Code Structure (15%)**: מבנה הקוד
- **Efficiency (15%)**: יעילות הקוד
- **Edge Cases (15%)**: טיפול במקרים קיצוניים

---

## תכונות מתקדמות
- **תיקון שגיאות OCR**: המערכת מתקנת שגיאות נפוצות בזיהוי טקסט
- **עיבוד תמונה אוטומטי**: המרה לגווני אפור, הגדלת ניגודיות, חדות, ושמירה ב-PNG לשיפור תוצאות OCR
- **השוואה חכמה**: שימוש ב-Gemini להשוואה מתקדמת של תשובות
- **בדיקת קוד דינמית**: הרצת קוד הסטודנט עם קלטים שונים לבדיקת תקינות
- **ממשק משתמש אינטואיטיבי**: עבודה נוחה עם חלונות נפרדים לכל שלב
- **דיוק OCR**: הצגת אחוז דיוק OCR עם קידוד צבעים לפי רמת הדיוק
- **עיצוב טבלאות משופר**: תאים בגודל מותאם עם עיצוב נקי וקריא
- **אבטחה משופרת**: שימוש במשתני סביבה לאחסון מידע רגיש

---

## פתרון תקלות נפוצות

### בעיות הגדרות סביבה
- **שגיאת "API key not found":**
  - ודא שקובץ `.env` קיים בתיקיית הפרויקט
  - בדוק שהמפתח `GEMINI_API_KEY` מוגדר נכון
  - ודא שאין רווחים מיותרים סביב הסימן `=`

### בעיות הרשאות
- **לא מוצג טקסט/ציון:**
  - ודא שהתמונה ברורה וקריאה
  - בדוק שקובץ ההרשאות נמצא בתיקיית הפרויקט
  - ודא שיש חיבור לאינטרנט

### בעיות חבילות
- **שגיאת הרשאות או חבילה חסרה:**
  - התקן מחדש את החבילות עם `pip install -r requirements.txt`
  - ודא שהתקנת `python-dotenv`

### בעיות מערכת
- **המערכת לא מגיבה/נסגרת:**
  - נסה להריץ מהטרמינל כדי לראות הודעות שגיאה
  - ודא שיש לך Python 3.6 ומעלה

---

## הערות ושאלות נפוצות

**האם אפשר להוסיף קריטריונים נוספים לבדיקה?**
- כן, ניתן לערוך את רשימת הקריטריונים בקוד (`PARAMETERS` ב-`exam_grader.py`)

**האם אפשר להפעיל על קבצי PDF?**
- כרגע התמיכה היא בקבצי תמונה בלבד (JPG, PNG, BMP וכו')

**האם אפשר להפעיל על מחשב ללא אינטרנט?**
- לא, יש צורך בחיבור לאינטרנט עבור Google Vision ו-Gemini

**איך המערכת מתקנת שגיאות OCR?**
- המערכת כוללת אלגוריתמים לתיקון שגיאות נפוצות כמו החלפת תווים דומים ותיקון תחביר

**איך עיבוד התמונה משפר את תוצאות OCR?**
- המערכת ממירה תמונות לגווני אפור, מגדילה ניגודיות, מחדדת את התמונה, ושומרת ב-PNG לשיפור דיוק הזיהוי

**מה אומר אחוז דיוק OCR?**
- אחוז הדיוק מציין עד כמה Google Vision בטוח בזיהוי הטקסט מהתמונה. אחוז גבוה יותר אומר זיהוי מדויק יותר.

**איך משתמשים בקובץ .env?**
- הקובץ `.env` מגיע מוכן מהקובץ ZIP. פשוט העתק אותו לתיקיית הפרויקט.
- הקובץ לא יועלה ל-Git אוטומטית מסיבות אבטחה.

---

## קרדיטים
- **Google Cloud Vision API** - לזיהוי טקסט מתמונות
- **Gemini API** - לבדיקה חכמה של תשובות
- **Pillow** - לעיבוד תמונות
- **tkinter** - לממשק משתמש גרפי
- **python-dotenv** - לניהול משתני סביבה

---

## מחברים
- **ליאב יהושע**
- **רוני שררה**
- **דוד מילמן**

---

## גרסאות
- **v1.1** - עדכון מערכת OCR, שיפור ממשק משתמש, הוספת תיקון שגיאות
- **v1.2** - הוספת דיוק OCR עם קידוד צבעים, שיפור עיצוב טבלאות ציונים
- **v1.3** - הוספת אבטחה משופרת עם קובץ .env, ניהול משתני סביבה
